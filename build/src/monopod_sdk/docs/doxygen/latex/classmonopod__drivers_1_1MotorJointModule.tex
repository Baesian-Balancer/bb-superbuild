\hypertarget{classmonopod__drivers_1_1MotorJointModule}{}\doxysection{monopod\+\_\+drivers\+::Motor\+Joint\+Module Class Reference}
\label{classmonopod__drivers_1_1MotorJointModule}\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}


The \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule}{Motor\+Joint\+Module}} class is containing the joint information. It is here to help converting the data from the motor side to the joint side. It also allows the calibration of the joint position during initialization.  




{\ttfamily \#include $<$motor\+\_\+joint\+\_\+module.\+hpp$>$}



Inheritance diagram for monopod\+\_\+drivers\+::Motor\+Joint\+Module\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{classmonopod__drivers_1_1MotorJointModule__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for monopod\+\_\+drivers\+::Motor\+Joint\+Module\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classmonopod__drivers_1_1MotorJointModule__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_aa492a6baebdcc7cb19ca06fd835f2984}{Motor\+Joint\+Module}} (\mbox{\hyperlink{namespacemonopod__drivers_a292411dcb88919df4d05216355c248d0}{Joint\+Names\+Index}} joint\+\_\+id, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classmonopod__drivers_1_1MotorInterface}{monopod\+\_\+drivers\+::\+Motor\+Interface}} $>$ motor, const double \&motor\+\_\+constant, const double \&gear\+\_\+ratio, const double \&zero\+\_\+angle, const bool \&reverse\+\_\+polarity=false)
\begin{DoxyCompactList}\small\item\em Construct a new \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule}{Motor\+Joint\+Module}} object. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a3768ec9ff86188a7af68fae701fc4482}{set\+\_\+torque}} (const double \&desired\+\_\+torque)
\begin{DoxyCompactList}\small\item\em Set the joint torque to be sent. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_aee76c240d03018425ca94082243faf83}\label{classmonopod__drivers_1_1MotorJointModule_aee76c240d03018425ca94082243faf83}} 
virtual void \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_aee76c240d03018425ca94082243faf83}{send\+\_\+torque}} ()
\begin{DoxyCompactList}\small\item\em send the joint torque to the motor. The conversion between joint torque and motor current is done automatically. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a5d49568b01f717be33c94a684f8aa310}{set\+\_\+max\+\_\+torque}} (const double \&max\+\_\+torque)
\begin{DoxyCompactList}\small\item\em Set the maximum admissible joint torque that can be applied. \end{DoxyCompactList}\item 
virtual double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a8468668a37d5434a922768917760acad}{get\+\_\+max\+\_\+torque}} () const
\begin{DoxyCompactList}\small\item\em Get the maximum admissible joint torque that can be applied. \end{DoxyCompactList}\item 
virtual double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a28b17ad27d3b323d6dc352d0e3e3f2aa}{get\+\_\+sent\+\_\+torque}} () const
\begin{DoxyCompactList}\small\item\em Get the sent joint torque. \end{DoxyCompactList}\item 
virtual double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_ac02e66976615c405451a47be99ec9844}{get\+\_\+measured\+\_\+torque}} () const
\begin{DoxyCompactList}\small\item\em Get the measured joint torque. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_ac8a4ce0e2ff88ad9be24b9441b10daca}{set\+\_\+position\+\_\+control\+\_\+gains}} (double kp, double kd)
\begin{DoxyCompactList}\small\item\em Set control gains for PD position controller. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a26b804df8e041e3e99ab0c58febea24a}{execute\+\_\+position\+\_\+controller}} (double target\+\_\+position\+\_\+rad) const
\begin{DoxyCompactList}\small\item\em Execute one iteration of the position controller. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a5d9d138117e5a7e81c799b0a4f4ad51e}{homing\+\_\+at\+\_\+current\+\_\+position}} (double home\+\_\+offset\+\_\+rad)
\begin{DoxyCompactList}\small\item\em Set zero position relative to current position. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a909f516ba90dc939ba5c9c50358a4186}{init\+\_\+homing}} (double search\+\_\+distance\+\_\+limit\+\_\+rad, double home\+\_\+offset\+\_\+rad, double profile\+\_\+step\+\_\+size\+\_\+rad=0.\+001)
\begin{DoxyCompactList}\small\item\em Initialize the homing procedure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacemonopod__drivers_a4542e42cd32958f48d461a77bbc2e812}{Homing\+Return\+Code}} \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_aec64d1a853e6f70c02c50e342f9994a4}{update\+\_\+homing}} ()
\begin{DoxyCompactList}\small\item\em Perform one step of homing on encoder index. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_ac9dff77691ba3a236ac37f18aa547d9c}{get\+\_\+distance\+\_\+travelled\+\_\+during\+\_\+homing}} () const
\begin{DoxyCompactList}\small\item\em Get distance between start and end position of homing. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a9a0b1babacb7370705c6c32e7c70a5a5}{joint\+\_\+torque\+\_\+to\+\_\+motor\+\_\+current}} (double torque) const
\begin{DoxyCompactList}\small\item\em Convert from joint torque to motor current. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a6bd65ba517bf011a644b33d19243dc25}{motor\+\_\+current\+\_\+to\+\_\+joint\+\_\+torque}} (double current) const
\begin{DoxyCompactList}\small\item\em Convert from motor current to joint torque. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_ad3db6e45d58ceea068f74eeb11ad4361}\label{classmonopod__drivers_1_1MotorJointModule_ad3db6e45d58ceea068f74eeb11ad4361}} 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classmonopod__drivers_1_1MotorInterface}{monopod\+\_\+drivers\+::\+Motor\+Interface}} $>$ \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_ad3db6e45d58ceea068f74eeb11ad4361}{motor\+\_\+}}
\begin{DoxyCompactList}\small\item\em This is the pointer to the motor interface. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a9ac1d31d9039e04b4643f310b8b0fa56}\label{classmonopod__drivers_1_1MotorJointModule_a9ac1d31d9039e04b4643f310b8b0fa56}} 
double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a9ac1d31d9039e04b4643f310b8b0fa56}{motor\+\_\+constant\+\_\+}}
\begin{DoxyCompactList}\small\item\em This is the torque constant of the motor\+: $ \tau_{motor} = k * i_{motor} $. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a118a2c3f2d6fd3fc2f14195ac9a2f223}\label{classmonopod__drivers_1_1MotorJointModule_a118a2c3f2d6fd3fc2f14195ac9a2f223}} 
double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a118a2c3f2d6fd3fc2f14195ac9a2f223}{max\+\_\+current\+\_\+}} = M\+A\+X\+\_\+\+C\+U\+R\+R\+E\+NT $\ast$ 0.\+9
\begin{DoxyCompactList}\small\item\em This is the maximum current we can apply during one experiment. The program will clip the current if it goes above this value. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a001f0cf005e9a3c08ac180b0a8317a24}\label{classmonopod__drivers_1_1MotorJointModule_a001f0cf005e9a3c08ac180b0a8317a24}} 
double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a001f0cf005e9a3c08ac180b0a8317a24}{position\+\_\+control\+\_\+gain\+\_\+p\+\_\+}}
\begin{DoxyCompactList}\small\item\em P gain of the position PD controller. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a410df7c30b3feb47ae58fe0693ea2795}\label{classmonopod__drivers_1_1MotorJointModule_a410df7c30b3feb47ae58fe0693ea2795}} 
double \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a410df7c30b3feb47ae58fe0693ea2795}{position\+\_\+control\+\_\+gain\+\_\+d\+\_\+}}
\begin{DoxyCompactList}\small\item\em D gain of the position PD controller. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a78e580700bdad2f316741ec28eb12e34}\label{classmonopod__drivers_1_1MotorJointModule_a78e580700bdad2f316741ec28eb12e34}} 
struct \mbox{\hyperlink{structmonopod__drivers_1_1HomingState}{Homing\+State}} \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_a78e580700bdad2f316741ec28eb12e34}{homing\+\_\+state\+\_\+}}
\begin{DoxyCompactList}\small\item\em Holds the state of homing during the homing sequence. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule}{Motor\+Joint\+Module}} class is containing the joint information. It is here to help converting the data from the motor side to the joint side. It also allows the calibration of the joint position during initialization. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_aa492a6baebdcc7cb19ca06fd835f2984}\label{classmonopod__drivers_1_1MotorJointModule_aa492a6baebdcc7cb19ca06fd835f2984}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!MotorJointModule@{MotorJointModule}}
\index{MotorJointModule@{MotorJointModule}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{MotorJointModule()}{MotorJointModule()}}
{\footnotesize\ttfamily monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::\+Motor\+Joint\+Module (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacemonopod__drivers_a292411dcb88919df4d05216355c248d0}{Joint\+Names\+Index}}}]{joint\+\_\+id,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classmonopod__drivers_1_1MotorInterface}{monopod\+\_\+drivers\+::\+Motor\+Interface}} $>$}]{motor,  }\item[{const double \&}]{motor\+\_\+constant,  }\item[{const double \&}]{gear\+\_\+ratio,  }\item[{const double \&}]{zero\+\_\+angle,  }\item[{const bool \&}]{reverse\+\_\+polarity = {\ttfamily false} }\end{DoxyParamCaption})}



Construct a new \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule}{Motor\+Joint\+Module}} object. 


\begin{DoxyParams}{Parameters}
{\em motor} & is the C++ object allowing us to send commands and receive sensor data. \\
\hline
{\em motor\+\_\+constant} & ( $ k $) is the torque constant of the motor $ \tau_{motor} = k * i_{motor} $ \\
\hline
{\em gear\+\_\+ratio} & is the gear ratio between the motor and the joint. \\
\hline
{\em zero\+\_\+angle} & is the angle between the closest positive motor index and the zero configuration. \\
\hline
{\em reverse\+\_\+polarity} & \\
\hline
{\em max\+\_\+current} & \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a26b804df8e041e3e99ab0c58febea24a}\label{classmonopod__drivers_1_1MotorJointModule_a26b804df8e041e3e99ab0c58febea24a}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!execute\_position\_controller@{execute\_position\_controller}}
\index{execute\_position\_controller@{execute\_position\_controller}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{execute\_position\_controller()}{execute\_position\_controller()}}
{\footnotesize\ttfamily double monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::execute\+\_\+position\+\_\+controller (\begin{DoxyParamCaption}\item[{double}]{target\+\_\+position\+\_\+rad }\end{DoxyParamCaption}) const}



Execute one iteration of the position controller. 


\begin{DoxyParams}{Parameters}
{\em target\+\_\+position\+\_\+rad} & Target position (rad).\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Torque command (Nm). 
\end{DoxyReturn}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_ac9dff77691ba3a236ac37f18aa547d9c}\label{classmonopod__drivers_1_1MotorJointModule_ac9dff77691ba3a236ac37f18aa547d9c}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!get\_distance\_travelled\_during\_homing@{get\_distance\_travelled\_during\_homing}}
\index{get\_distance\_travelled\_during\_homing@{get\_distance\_travelled\_during\_homing}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{get\_distance\_travelled\_during\_homing()}{get\_distance\_travelled\_during\_homing()}}
{\footnotesize\ttfamily double monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::get\+\_\+distance\+\_\+travelled\+\_\+during\+\_\+homing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get distance between start and end position of homing. 

Compute the distance that the joint moved between initialization of homing and reaching the home position.

This can be used to determine the home offset by first moving the joint to the desired zero position, then executing the homing and finally calling this function which will provide the desired home offset.

\begin{DoxyReturn}{Returns}
Distance between start and end position of homing. 
\end{DoxyReturn}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a8468668a37d5434a922768917760acad}\label{classmonopod__drivers_1_1MotorJointModule_a8468668a37d5434a922768917760acad}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!get\_max\_torque@{get\_max\_torque}}
\index{get\_max\_torque@{get\_max\_torque}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{get\_max\_torque()}{get\_max\_torque()}}
{\footnotesize\ttfamily virtual double monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::get\+\_\+max\+\_\+torque (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Get the maximum admissible joint torque that can be applied. 

\begin{DoxyReturn}{Returns}
double 
\end{DoxyReturn}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_ac02e66976615c405451a47be99ec9844}\label{classmonopod__drivers_1_1MotorJointModule_ac02e66976615c405451a47be99ec9844}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!get\_measured\_torque@{get\_measured\_torque}}
\index{get\_measured\_torque@{get\_measured\_torque}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{get\_measured\_torque()}{get\_measured\_torque()}}
{\footnotesize\ttfamily virtual double monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::get\+\_\+measured\+\_\+torque (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Get the measured joint torque. 

\begin{DoxyReturn}{Returns}
double (Nm). 
\end{DoxyReturn}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a28b17ad27d3b323d6dc352d0e3e3f2aa}\label{classmonopod__drivers_1_1MotorJointModule_a28b17ad27d3b323d6dc352d0e3e3f2aa}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!get\_sent\_torque@{get\_sent\_torque}}
\index{get\_sent\_torque@{get\_sent\_torque}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{get\_sent\_torque()}{get\_sent\_torque()}}
{\footnotesize\ttfamily virtual double monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::get\+\_\+sent\+\_\+torque (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Get the sent joint torque. 

\begin{DoxyReturn}{Returns}
double (Nm). 
\end{DoxyReturn}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a5d9d138117e5a7e81c799b0a4f4ad51e}\label{classmonopod__drivers_1_1MotorJointModule_a5d9d138117e5a7e81c799b0a4f4ad51e}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!homing\_at\_current\_position@{homing\_at\_current\_position}}
\index{homing\_at\_current\_position@{homing\_at\_current\_position}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{homing\_at\_current\_position()}{homing\_at\_current\_position()}}
{\footnotesize\ttfamily void monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::homing\+\_\+at\+\_\+current\+\_\+position (\begin{DoxyParamCaption}\item[{double}]{home\+\_\+offset\+\_\+rad }\end{DoxyParamCaption})}



Set zero position relative to current position. 


\begin{DoxyParams}{Parameters}
{\em home\+\_\+offset\+\_\+rad} & Offset from home position to zero position. Unit\+: radian. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a909f516ba90dc939ba5c9c50358a4186}\label{classmonopod__drivers_1_1MotorJointModule_a909f516ba90dc939ba5c9c50358a4186}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!init\_homing@{init\_homing}}
\index{init\_homing@{init\_homing}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{init\_homing()}{init\_homing()}}
{\footnotesize\ttfamily void monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::init\+\_\+homing (\begin{DoxyParamCaption}\item[{double}]{search\+\_\+distance\+\_\+limit\+\_\+rad,  }\item[{double}]{home\+\_\+offset\+\_\+rad,  }\item[{double}]{profile\+\_\+step\+\_\+size\+\_\+rad = {\ttfamily 0.001} }\end{DoxyParamCaption})}



Initialize the homing procedure. 

This has to be called before \mbox{\hyperlink{classmonopod__drivers_1_1MotorJointModule_aec64d1a853e6f70c02c50e342f9994a4}{update\+\_\+homing()}}.


\begin{DoxyParams}{Parameters}
{\em search\+\_\+distance\+\_\+limit\+\_\+rad} & Maximum distance the motor moves while searching for the encoder index. Unit\+: radian. \\
\hline
{\em home\+\_\+offset\+\_\+rad} & Offset from home position to zero position. Unit\+: radian. \\
\hline
{\em profile\+\_\+step\+\_\+size\+\_\+rad} & Distance by which the target position of the position profile is changed in each step. Set to a negative value to search for the next encoder index in negative direction. Unit\+: radian. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a9a0b1babacb7370705c6c32e7c70a5a5}\label{classmonopod__drivers_1_1MotorJointModule_a9a0b1babacb7370705c6c32e7c70a5a5}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!joint\_torque\_to\_motor\_current@{joint\_torque\_to\_motor\_current}}
\index{joint\_torque\_to\_motor\_current@{joint\_torque\_to\_motor\_current}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{joint\_torque\_to\_motor\_current()}{joint\_torque\_to\_motor\_current()}}
{\footnotesize\ttfamily double monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::joint\+\_\+torque\+\_\+to\+\_\+motor\+\_\+current (\begin{DoxyParamCaption}\item[{double}]{torque }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Convert from joint torque to motor current. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em torque} & is the input joint \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double the equivalent motor current. 
\end{DoxyReturn}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a6bd65ba517bf011a644b33d19243dc25}\label{classmonopod__drivers_1_1MotorJointModule_a6bd65ba517bf011a644b33d19243dc25}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!motor\_current\_to\_joint\_torque@{motor\_current\_to\_joint\_torque}}
\index{motor\_current\_to\_joint\_torque@{motor\_current\_to\_joint\_torque}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{motor\_current\_to\_joint\_torque()}{motor\_current\_to\_joint\_torque()}}
{\footnotesize\ttfamily double monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::motor\+\_\+current\+\_\+to\+\_\+joint\+\_\+torque (\begin{DoxyParamCaption}\item[{double}]{current }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Convert from motor current to joint torque. 


\begin{DoxyParams}{Parameters}
{\em current} & is the motor current. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double is the equivalent joint torque. 
\end{DoxyReturn}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a5d49568b01f717be33c94a684f8aa310}\label{classmonopod__drivers_1_1MotorJointModule_a5d49568b01f717be33c94a684f8aa310}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!set\_max\_torque@{set\_max\_torque}}
\index{set\_max\_torque@{set\_max\_torque}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{set\_max\_torque()}{set\_max\_torque()}}
{\footnotesize\ttfamily virtual void monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::set\+\_\+max\+\_\+torque (\begin{DoxyParamCaption}\item[{const double \&}]{max\+\_\+torque }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Set the maximum admissible joint torque that can be applied. 

\begin{DoxyReturn}{Returns}
double 
\end{DoxyReturn}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_ac8a4ce0e2ff88ad9be24b9441b10daca}\label{classmonopod__drivers_1_1MotorJointModule_ac8a4ce0e2ff88ad9be24b9441b10daca}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!set\_position\_control\_gains@{set\_position\_control\_gains}}
\index{set\_position\_control\_gains@{set\_position\_control\_gains}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{set\_position\_control\_gains()}{set\_position\_control\_gains()}}
{\footnotesize\ttfamily void monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::set\+\_\+position\+\_\+control\+\_\+gains (\begin{DoxyParamCaption}\item[{double}]{kp,  }\item[{double}]{kd }\end{DoxyParamCaption})}



Set control gains for PD position controller. 


\begin{DoxyParams}{Parameters}
{\em kp} & P gain ( (Nm) / rad ). \\
\hline
{\em kd} & D gain ( (Nm) / (rad/s) ). \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_a3768ec9ff86188a7af68fae701fc4482}\label{classmonopod__drivers_1_1MotorJointModule_a3768ec9ff86188a7af68fae701fc4482}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!set\_torque@{set\_torque}}
\index{set\_torque@{set\_torque}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{set\_torque()}{set\_torque()}}
{\footnotesize\ttfamily virtual void monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::set\+\_\+torque (\begin{DoxyParamCaption}\item[{const double \&}]{desired\+\_\+torque }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Set the joint torque to be sent. 


\begin{DoxyParams}{Parameters}
{\em desired\+\_\+torque} & (Nm) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classmonopod__drivers_1_1MotorJointModule_aec64d1a853e6f70c02c50e342f9994a4}\label{classmonopod__drivers_1_1MotorJointModule_aec64d1a853e6f70c02c50e342f9994a4}} 
\index{monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}!update\_homing@{update\_homing}}
\index{update\_homing@{update\_homing}!monopod\_drivers::MotorJointModule@{monopod\_drivers::MotorJointModule}}
\doxysubsubsection{\texorpdfstring{update\_homing()}{update\_homing()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacemonopod__drivers_a4542e42cd32958f48d461a77bbc2e812}{Homing\+Return\+Code}} monopod\+\_\+drivers\+::\+Motor\+Joint\+Module\+::update\+\_\+homing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform one step of homing on encoder index. 

Searches for the next encoder index in positive direction and, when found, sets it as home position.

Only performs one step, so this method needs to be called in a loop. This method only set the control, one {\itshape M\+U\+ST} send the control for the motor after calling this method.

The motor is moved with a position profile until either the encoder index is reached or the search distance limit is exceeded. The position is controlled with a simple PD controller.

If the encoder index is found, its position is used as home position. The zero position is offset from the home position by adding the \char`\"{}home
offset\char`\"{} to it (i.\+e. zero = home pos. + home offset). If the search distance limit is reached before the encoder index occurs, the homing fails.

\begin{DoxyReturn}{Returns}
Status of the homing procedure. 
\end{DoxyReturn}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/dawson/\+Documents/\+Repos/os2r-\/superbuild/src/monopod\+\_\+sdk/include/monopod\+\_\+sdk/monopod\+\_\+drivers/motor\+\_\+joint\+\_\+module.\+hpp\end{DoxyCompactItemize}
